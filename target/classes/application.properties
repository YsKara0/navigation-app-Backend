# ============================================
# INDOOR NAVIGATION BACKEND - YAPILANDIRMA
# ============================================

# --- H2 In-Memory Database (kurulum gerektirmez) ---
spring.datasource.url=jdbc:h2:mem:navigationdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# H2 Console (debug i√ßin)
# Lokal: http://localhost:8080/h2-console
# Prod:  https://navigation-app.bayessoft.com.tr/h2-console
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# JPA Ayarlari
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false

# ============================================
# SERVER AYARLARI
# ============================================
# Production (Coolify) icin 8080 kullan
server.port=8080
# Docker container icin tum IP'lerden erisim
server.address=0.0.0.0

# Lokal test icin port degistirmek istersen:
# server.port=8081

# ============================================
# CORS AYARLARI
# ============================================
cors.allowed-origins=https://navigation-app.bayessoft.com.tr

# ============================================
# CALISTIRMA KOMUTLARI
# ============================================
#
# --- LOKAL CALISTIRMA ---
# Terminal'de backend klasorune git:
#   cd backend
#
# Maven ile calistir:
#   mvn spring-boot:run
#
# veya JAR olusturup calistir:
#   mvn clean package -DskipTests
#   java -jar target/backend-0.0.1-SNAPSHOT.jar
#
# --- LOKAL TEST URL'LERI ---
# WebSocket:    ws://localhost:8080/ws/navigation
# Test Sayfasi: http://localhost:8080/test.html
# H2 Console:   http://localhost:8080/h2-console
#
# --- PRODUCTION URL'LERI (Coolify) ---
# WebSocket:    wss://navigation-app.bayessoft.com.tr/ws/navigation
# Test Sayfasi: https://navigation-app.bayessoft.com.tr/test.html
# H2 Console:   https://navigation-app.bayessoft.com.tr/h2-console
#
# --- DOCKER ILE LOKAL TEST ---
# docker build -t navigation-backend .
# docker run -p 8080:8080 navigation-backend
#
# ============================================
# ============================================
# WEBSOCKET TIMEOUT AYARLARI (Cloudflare Proxy)
# ============================================
server.tomcat.connection-timeout=600000
spring.task.scheduling.pool.size=5

# WebSocket Debug Logging
logging.level.org.springframework.web.socket=DEBUG